# expect: 1
var released = 0

struct Resource
    value: int

    func release()
        released = 1
    end
end

func do_work()
    with var r = Resource(value = 10)
        return
    end
end

func main(): int
    do_work()
    return released
end
